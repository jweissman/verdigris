{
  "squirrel": {
    "name": "Summon Squirrel",
    "cooldown": 10,
    "effects": [
      {
        "type": "summon",
        "unit": "squirrel",
        "intendedProtectee": "self.id",
        "posture": "guard"
      },
      {
        "type": "projectile",
        "id": "nut",
        "pos": "self.pos",
        "radius": 2,
        "damage": 0,
        "team": "self.team",
        "projectileType": "bomb",
        "target": { 
          "x": { "$random": [-2, 2] }, 
          "y": { "$random": [-2, 2] } 
        },
        "origin": "self.pos",
        "progress": 0,
        "duration": 3,
        "z": 0,
        "aoeRadius": 0
      }
    ]
  },
  
  "jumps": {
    "name": "Hurl Self",
    "cooldown": 100,
    "config": {
      "height": 5,
      "speed": 2,
      "impact": {
        "radius": 3,
        "damage": 5
      },
      "duration": 10
    },
    "target": "closest.enemy()?.pos",
    "trigger": "distance(closest.enemy()?.pos) > 10",
    "effects": [
      {
        "type": "jump",
        "target": "target",
        "condition": "target_exists",
        "meta": {
          "jumping": true,
          "jumpProgress": 0,
          "jumpOrigin": "self.pos",
          "jumpTarget": "target"
        }
      }
    ]
  },

  "ranged": {
    "name": "Sling Shot",
    "cooldown": 6,
    "config": {
      "range": 10,
      "damage": 4,
      "speed": 2
    },
    "target": "closest.enemy()",
    "trigger": "distance(closest.enemy()?.pos) <= 10 && distance(closest.enemy()?.pos) > 2",
    "effects": [
      {
        "type": "projectile",
        "id": "bullet",
        "pos": "self.pos",
        "vel": {
          "$calculate": "normalized_direction_to_target * 2"
        },
        "radius": 1.5,
        "damage": 4,
        "team": "self.team",
        "projectileType": "bullet"
      }
    ]
  },

  "bombardier": {
    "name": "Bomb Toss",
    "cooldown": 15,
    "config": {
      "range": 14,
      "damage": 6,
      "aoeRadius": 4,
      "duration": 8
    },
    "target": "closest.enemy()?.pos",
    "trigger": "distance(closest.enemy()?.pos) <= 14 && distance(closest.enemy()?.pos) > 5",
    "effects": [
      {
        "type": "projectile",
        "id": "bomb",
        "pos": "self.pos",
        "vel": { "x": 0, "y": 0 },
        "radius": 2,
        "damage": 6,
        "team": "self.team",
        "projectileType": "bomb",
        "target": "target",
        "origin": "self.pos",
        "progress": 0,
        "duration": 4,
        "z": 0,
        "aoeRadius": 3
      }
    ]
  },

  "heal": {
    "name": "Sacred Circle",
    "cooldown": 40,
    "config": {
      "range": 8,
      "healAmount": 8,
      "aoeRadius": 3
    },
    "target": "weakest.ally()",
    "effects": [
      {
        "type": "aoe",
        "target": "wounded_allies_center",
        "aspect": "heal",
        "amount": 18,
        "radius": 3,
        "condition": "wounded_allies_in_range"
      }
    ]
  },

  "radiant": {
    "name": "Radiant Strike",
    "cooldown": 30,
    "config": {
      "range": 2,
      "damage": 8,
      "bonusDamage": 20
    },
    "target": "closest.enemy()",
    "trigger": "distance(closest.enemy()?.pos) <= 2",
    "effects": [
      {
        "type": "damage",
        "target": "target",
        "aspect": "radiant",
        "amount": {
          "$conditional": {
            "if": "target.tags.includes('undead') || target.tags.includes('spectral')",
            "then": 20,
            "else": 8
          }
        },
        "origin": "self.pos"
      },
      {
        "type": "heat",
        "target": "target.pos",
        "amount": 5,
        "radius": 1
      }
    ]
  },

  "fireBlast": {
    "name": "Fire Blast",
    "cooldown": 40,
    "config": {
      "range": 3,
      "damage": 12,
      "radius": 2
    },
    "target": "closest.enemy()",
    "trigger": "distance(closest.enemy()?.pos) <= 3",
    "effects": [
      {
        "type": "damage",
        "target": "target",
        "aspect": "heat",
        "amount": 12,
        "origin": "self.pos"
      },
      {
        "type": "heat",
        "target": "target.pos",
        "amount": 20,
        "radius": 2
      },
      {
        "type": "setOnFire",
        "target": "target"
      },
      {
        "type": "particles",
        "particleType": "fire",
        "count": 5,
        "target": "target.pos",
        "spread": 3
      }
    ]
  },

  "makeRain": {
    "name": "Make Rain",
    "cooldown": 200,
    "config": {
      "duration": 80,
      "intensity": 0.8,
      "radius": 5
    },
    "effects": [
      {
        "type": "weather",
        "weatherType": "rain",
        "duration": 80,
        "intensity": 0.8
      },
      {
        "type": "moisture",
        "target": "self.pos",
        "amount": 1.0,
        "radius": 5
      },
      {
        "type": "heat",
        "target": "self.pos",
        "amount": -10,
        "radius": 5
      }
    ]
  },

  "breatheFire": {
    "name": "Breathe Fire",
    "cooldown": 60,
    "config": {
      "range": 4,
      "coneAngle": 1.047,
      "fireIntensity": 15,
      "sparkCount": 8
    },
    "effects": [
      {
        "type": "cone",
        "direction": "self.facing",
        "range": 4,
        "width": 3,
        "effects": [
          {
            "type": "heat",
            "amount": 20,
            "radius": 2
          },
          {
            "type": "particles",
            "particleType": "fire"
          },
          {
            "type": "damage",
            "aspect": "heat",
            "amount": 15,
            "origin": "self.pos"
          },
          {
            "type": "setOnFire"
          }
        ]
      }
    ]
  }
}