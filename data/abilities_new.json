{
  "squirrel": {
    "name": "Summon Squirrel",
    "cooldown": 10,
    "effects": [
      {
        "type": "summon",
        "unit": "squirrel",
        "intendedProtectee": "self.id",
        "posture": "guard"
      },
      {
        "type": "projectile",
        "id": "nut",
        "pos": "self.pos",
        "radius": 2,
        "damage": 0,
        "team": "self.team",
        "projectileType": "bomb",
        "target": { 
          "x": { "$random": [-2, 2] }, 
          "y": { "$random": [-2, 2] } 
        },
        "origin": "self.pos",
        "progress": 0,
        "duration": 3,
        "z": 0,
        "aoeRadius": 0
      }
    ]
  },
  
  "jumps": {
    "name": "Hurl Self",
    "cooldown": 100,
    "config": {
      "height": 5,
      "speed": 2,
      "impact": {
        "radius": 3,
        "damage": 5
      },
      "duration": 10
    },
    "target": "closest.enemy()?.pos",
    "trigger": "distance(closest.enemy()?.pos) > 10",
    "effects": [
      {
        "type": "jump",
        "target": "target",
        "condition": "target_exists",
        "meta": {
          "jumping": true,
          "jumpProgress": 0,
          "jumpOrigin": "self.pos",
          "jumpTarget": "target"
        }
      }
    ]
  },

  "ranged": {
    "name": "Sling Shot",
    "cooldown": 6,
    "config": {
      "range": 10,
      "damage": 4,
      "speed": 2
    },
    "target": "closest.enemy()",
    "trigger": "distance(closest.enemy()?.pos) <= 10 && distance(closest.enemy()?.pos) > 2",
    "effects": [
      {
        "type": "projectile",
        "id": "bullet",
        "pos": "self.pos",
        "vel": {
          "$calculate": "normalized_direction_to_target * 2"
        },
        "radius": 1.5,
        "damage": 4,
        "team": "self.team",
        "projectileType": "bullet"
      }
    ]
  },

  "bombardier": {
    "name": "Bomb Toss",
    "cooldown": 15,
    "config": {
      "range": 14,
      "damage": 6,
      "aoeRadius": 4,
      "duration": 8
    },
    "target": "closest.enemy()?.pos",
    "trigger": "distance(closest.enemy()?.pos) <= 14 && distance(closest.enemy()?.pos) > 5",
    "effects": [
      {
        "type": "projectile",
        "id": "bomb",
        "pos": "self.pos",
        "vel": { "x": 0, "y": 0 },
        "radius": 2,
        "damage": 6,
        "team": "self.team",
        "projectileType": "bomb",
        "target": "target",
        "origin": "self.pos",
        "progress": 0,
        "duration": 4,
        "z": 0,
        "aoeRadius": 3
      }
    ]
  },

  "heal": {
    "name": "Sacred Circle",
    "cooldown": 40,
    "config": {
      "range": 8,
      "healAmount": 8,
      "aoeRadius": 3
    },
    "target": "weakest.ally()",
    "effects": [
      {
        "type": "aoe",
        "target": "wounded_allies_center",
        "aspect": "heal",
        "amount": 18,
        "radius": 3,
        "condition": "wounded_allies_in_range"
      }
    ]
  },

  "radiant": {
    "name": "Radiant Strike",
    "cooldown": 30,
    "config": {
      "range": 2,
      "damage": 8,
      "bonusDamage": 20
    },
    "target": "closest.enemy()",
    "trigger": "distance(closest.enemy()?.pos) <= 2",
    "effects": [
      {
        "type": "damage",
        "target": "target",
        "aspect": "radiant",
        "amount": {
          "$conditional": {
            "if": "target.tags.includes('undead') || target.tags.includes('spectral')",
            "then": 20,
            "else": 8
          }
        },
        "origin": "self.pos"
      },
      {
        "type": "heat",
        "target": "target.pos",
        "amount": 5,
        "radius": 1
      }
    ]
  },

  "fireBlast": {
    "name": "Fire Blast",
    "cooldown": 40,
    "config": {
      "range": 3,
      "damage": 12,
      "radius": 2
    },
    "target": "closest.enemy()",
    "trigger": "distance(closest.enemy()?.pos) <= 3",
    "effects": [
      {
        "type": "damage",
        "target": "target",
        "aspect": "heat",
        "amount": 12,
        "origin": "self.pos"
      },
      {
        "type": "heat",
        "target": "target.pos",
        "amount": 20,
        "radius": 2
      },
      {
        "type": "setOnFire",
        "target": "target"
      },
      {
        "type": "particles",
        "particleType": "fire",
        "count": 5,
        "target": "target.pos",
        "spread": 3
      }
    ]
  },

  "makeRain": {
    "name": "Make Rain",
    "cooldown": 200,
    "config": {
      "duration": 80,
      "intensity": 0.8,
      "radius": 5
    },
    "effects": [
      {
        "type": "weather",
        "weatherType": "rain",
        "duration": 80,
        "intensity": 0.8
      },
      {
        "type": "moisture",
        "target": "self.pos",
        "amount": 1.0,
        "radius": 5
      },
      {
        "type": "heat",
        "target": "self.pos",
        "amount": -10,
        "radius": 5
      }
    ]
  },

  "breatheFire": {
    "name": "Breathe Fire",
    "cooldown": 60,
    "config": {
      "range": 4,
      "coneAngle": 1.047,
      "fireIntensity": 15,
      "sparkCount": 8
    },
    "effects": [
      {
        "type": "cone",
        "direction": "self.facing",
        "range": 4,
        "width": 3,
        "effects": [
          {
            "type": "heat",
            "amount": 20,
            "radius": 2
          },
          {
            "type": "particles",
            "particleType": "fire"
          },
          {
            "type": "damage",
            "aspect": "heat",
            "amount": 15,
            "origin": "self.pos"
          },
          {
            "type": "setOnFire"
          }
        ]
      }
    ]
  },

  "deployBot": {
    "name": "Deploy Bot",
    "cooldown": 50,
    "maxUses": 5,
    "config": {
      "range": 12,
      "constructTypes": ["freezebot", "clanker", "spiker", "swarmbot", "roller", "zapper"]
    },
    "target": "closest.enemy()?.pos || self.pos",
    "trigger": "distance(closest.enemy()?.pos) <= 12 || true",
    "effects": [
      {
        "type": "command",
        "command": "deploy",
        "args": ["random_construct_type"]
      }
    ]
  },

  "missileBarrage": {
    "name": "Missile Barrage",
    "cooldown": 80,
    "config": {
      "range": 15,
      "volleySize": 6
    },
    "target": "closest.enemy()?.pos",
    "trigger": "distance(closest.enemy()?.pos) <= 15",
    "effects": [
      {
        "type": "multiple_projectiles",
        "count": 6,
        "projectileType": "bomb",
        "pos": "self.pos",
        "vel": { "x": 0, "y": 0 },
        "radius": 3,
        "damage": 12,
        "team": "self.team",
        "target": {
          "$spread": {
            "center": "target",
            "radius": 8
          }
        },
        "origin": "self.pos",
        "duration": {
          "$stagger": {
            "base": 12,
            "increment": 2
          }
        },
        "z": 8
      }
    ]
  },

  "laserSweep": {
    "name": "Laser Sweep",
    "cooldown": 35,
    "config": {
      "range": 20,
      "width": 3
    },
    "target": "closest.enemy()?.pos",
    "trigger": "distance(closest.enemy()?.pos) <= 20",
    "effects": [
      {
        "type": "projectile",
        "projectileType": "laser_beam",
        "pos": "self.pos",
        "vel": {
          "$calculate": "normalized_direction_to_target * 2"
        },
        "target": "target",
        "origin": "self.pos",
        "progress": 0,
        "duration": {
          "$calculate": "max(4, floor(distance_to_target / 3))"
        },
        "z": 0,
        "radius": 2,
        "color": "#FF0000"
      },
      {
        "type": "particles",
        "particleType": "muzzle_flash",
        "pos": "self.pos",
        "color": "#FFFF00",
        "lifetime": 6
      },
      {
        "type": "particles",
        "particleType": "laser_impact",
        "pos": "target",
        "color": "#FF8800",
        "lifetime": 8
      },
      {
        "type": "line_aoe",
        "start": "self.pos",
        "end": "target",
        "width": 3,
        "aspect": "laser",
        "amount": 15,
        "piercing": true
      }
    ]
  },

  "empPulse": {
    "name": "EMP Pulse",
    "cooldown": 100,
    "config": {
      "radius": 8,
      "duration": 40
    },
    "target": "self.pos",
    "trigger": "closest.enemy() && distance(closest.enemy()?.pos) <= 8",
    "effects": [
      {
        "type": "aoe",
        "target": "self.pos",
        "aspect": "emp",
        "radius": 8,
        "amount": 0,
        "stunDuration": 40,
        "disruptor": true
      }
    ]
  },

  "shieldRecharge": {
    "name": "Shield Recharge",
    "cooldown": 120,
    "target": "self.pos",
    "trigger": "self.hp < self.maxHp * 0.5",
    "effects": [
      {
        "type": "heal",
        "target": "self",
        "aspect": "technological",
        "amount": {
          "$calculate": "floor(self.maxHp * 0.3)"
        }
      },
      {
        "type": "buff",
        "target": "self",
        "meta": {
          "shieldActive": true,
          "shieldDuration": 60,
          "damageReduction": 0.5
        }
      }
    ]
  },

  "callAirdrop": {
    "name": "Call Mechatron Airdrop",
    "cooldown": 120,
    "config": {
      "range": 20,
      "minAllies": 2
    },
    "target": "closest.enemy()?.pos",
    "trigger": "distance(closest.enemy()?.pos) > 8",
    "effects": [
      {
        "type": "command",
        "command": "airdrop",
        "args": [
          "mechatron",
          {
            "$calculate": "floor((self.pos.x + target.x) / 2)"
          },
          {
            "$calculate": "floor((self.pos.y + target.y) / 2)"
          }
        ]
      },
      {
        "type": "buff",
        "target": "self",
        "meta": {
          "calledAirdrop": true,
          "airdropTick": "sim.tick"
        }
      }
    ]
  },

  "tacticalOverride": {
    "name": "Tactical Override",
    "cooldown": 45,
    "config": {
      "range": 6,
      "boostAmount": 0.5
    },
    "target": "self.pos",
    "trigger": "closest.ally() != null",
    "effects": [
      {
        "type": "area_buff",
        "target": "self.pos",
        "radius": 6,
        "condition": "target.tags.includes('mechanical')",
        "buff": {
          "tacticalBoost": true,
          "tacticalBoostDuration": 40,
          "resetCooldowns": true
        }
      },
      {
        "type": "particles",
        "particleType": "energy",
        "pos": "self.pos",
        "color": "#00FFFF",
        "lifetime": 30
      }
    ]
  },

  "reinforceConstruct": {
    "name": "Reinforce Construct",
    "cooldown": 45,
    "config": {
      "range": 3
    },
    "target": "closest.ally()",
    "trigger": "closest.ally()?.tags?.includes('construct')",
    "effects": [
      {
        "type": "heal",
        "target": "target",
        "amount": 10
      },
      {
        "type": "buff",
        "target": "target",
        "buff": {
          "maxHp": "+10",
          "armor": "+1"
        }
      },
      {
        "type": "particles",
        "particleType": "energy",
        "pos": "target.pos",
        "color": "#00FF88",
        "lifetime": 20
      }
    ]
  },

  "powerSurge": {
    "name": "Power Surge",
    "cooldown": 40,
    "config": {
      "range": 4
    },
    "target": "self.pos",
    "trigger": "closest.ally()?.tags?.includes('construct') || closest.ally()?.tags?.includes('mechanical')",
    "effects": [
      {
        "type": "area_buff",
        "target": "self.pos",
        "radius": 4,
        "condition": "target.tags.includes('construct') || target.tags.includes('mechanical')",
        "buff": {
          "resetCooldowns": true
        }
      },
      {
        "type": "particles",
        "particleType": "energy_field",
        "pos": "self.pos",
        "color": "#FFAA00",
        "count": 8,
        "lifetime": 30
      }
    ]
  },

  "emergencyRepair": {
    "name": "Emergency Repair",
    "cooldown": 35,
    "config": {
      "range": 2
    },
    "target": "closest.ally()",
    "trigger": "closest.ally()?.hp < closest.ally()?.maxHp * 0.7",
    "effects": [
      {
        "type": "heal",
        "target": "target",
        "amount": 15
      },
      {
        "type": "cleanse",
        "target": "target",
        "effects": ["stunned", "stunDuration", "frozen"]
      },
      {
        "type": "particles",
        "particleType": "electric_spark",
        "pos": "target.pos",
        "color": "#FFFF00",
        "count": 6,
        "lifetime": 15
      }
    ]
  },

  "shieldGenerator": {
    "name": "Shield Generator",
    "cooldown": 60,
    "config": {
      "range": 3
    },
    "target": "self.pos",
    "trigger": "distance(closest.enemy()?.pos) <= 6",
    "effects": [
      {
        "type": "area_particles",
        "center": "self.pos",
        "size": "3x3",
        "particleType": "energy",
        "color": "#00CCFF",
        "lifetime": 80,
        "z": 2,
        "blockProjectiles": true
      }
    ]
  },

  "systemHack": {
    "name": "System Hack",
    "cooldown": 50,
    "config": {
      "range": 6
    },
    "target": "closest.enemy()?.pos",
    "trigger": "distance(closest.enemy()?.pos) <= 6",
    "effects": [
      {
        "type": "debuff",
        "target": "target",
        "debuff": {
          "systemsHacked": true,
          "hackDuration": 30,
          "disableAbilities": true
        }
      },
      {
        "type": "particles",
        "particleType": "energy",
        "pos": "target.pos",
        "color": "#FF0088",
        "lifetime": 30
      }
    ]
  },

  "freezeAura": {
    "name": "Chill Aura",
    "cooldown": 15,
    "config": {
      "radius": 2
    },
    "effects": [
      {
        "type": "aoe",
        "target": "self.pos",
        "aspect": "chill",
        "radius": 2,
        "amount": 0,
        "origin": "self.pos"
      }
    ]
  },

  "explode": {
    "name": "Self Destruct",
    "cooldown": 1,
    "trigger": "distance(closest.enemy()?.pos) <= 3",
    "effects": [
      {
        "type": "aoe",
        "target": "self.pos",
        "aspect": "impact",
        "radius": 3,
        "amount": 8,
        "force": 5,
        "origin": "self.pos"
      },
      {
        "type": "damage",
        "target": "self",
        "aspect": "impact",
        "amount": 999
      }
    ]
  },

  "whipChain": {
    "name": "Chain Whip",
    "cooldown": 20,
    "config": {
      "range": 3
    },
    "target": "closest.enemy()",
    "trigger": "distance(closest.enemy()?.pos) <= 3",
    "effects": [
      {
        "type": "damage",
        "target": "target",
        "aspect": "impact",
        "amount": 4,
        "force": 3,
        "origin": "self.pos"
      }
    ]
  },

  "chargeAttack": {
    "name": "Roller Charge",
    "cooldown": 30,
    "config": {
      "chargeDistance": 5
    },
    "trigger": "distance(closest.enemy()?.pos) <= 6",
    "effects": [
      {
        "type": "buff",
        "target": "self",
        "buff": {
          "charging": true,
          "chargeProgress": 0,
          "chargeTarget": "target?.pos || {x: self.pos.x + 5, y: self.pos.y}"
        }
      }
    ]
  },

  "zapHighest": {
    "name": "Power Zap",
    "cooldown": 25,
    "config": {
      "range": 6
    },
    "effects": [
      {
        "type": "damage",
        "target": "highest_hp_enemy_in_range",
        "aspect": "shock",
        "amount": 6,
        "origin": "self.pos"
      }
    ]
  }
}
